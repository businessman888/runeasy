# RunEasy - Product Requirements Document (PRD)

**Vers√£o:** 1.0  
**Data:** Dezembro 2025  
**Autor:** NEO - Product Specialist  
**Status:** Aprovado para Desenvolvimento

---

## 1. EXECUTIVE SUMMARY

### 1.1 Product Vision

**RunEasy** √© o primeiro aplicativo brasileiro de corrida com treinador de IA conversacional que oferece orienta√ß√£o t√©cnica personalizada atrav√©s de feedback p√≥s-treino inteligente e gamifica√ß√£o robusta.

**Vis√£o (3 anos):**  
Tornar-se a plataforma #1 de coaching IA para corredores na Am√©rica Latina, ajudando 100.000+ corredores a treinar corretamente e atingir seus objetivos com seguran√ßa.

**Miss√£o:**  
Democratizar o acesso a orienta√ß√£o t√©cnica profissional de corrida atrav√©s de intelig√™ncia artificial, tornando o coaching especializado acess√≠vel a qualquer corredor brasileiro por menos de BRL 1/dia.

---

### 1.2 Problem Statement

**Dor Principal (Critical Pain):**
> "Corredores iniciantes e intermedi√°rios (20-35 anos) no Brasil n√£o sabem se est√£o treinando corretamente, carecendo de orienta√ß√£o t√©cnica especializada para evoluir com seguran√ßa, efici√™ncia e consist√™ncia."

**Contexto do Problema:**
- 19+ milh√µes de brasileiros usam Strava (2¬∫ mercado global)
- 2.800+ eventos de corrida/ano no Brasil (+29% crescimento)
- Personal trainer presencial: BRL 8.000-12.000/ano (inacess√≠vel para 80%+ do p√∫blico)
- Apps atuais oferecem apenas tracking (Strava) ou coaching gen√©rico (Nike Run Club)
- Nenhum app brasileiro oferece feedback t√©cnico inteligente p√≥s-treino

**Consequ√™ncias da Dor:**
- Plat√¥ de performance (n√£o evoluem)
- Les√µes por overtraining ou t√©cnica inadequada
- Falta de consist√™ncia (77% abandonam apps de fitness em 3 dias)
- Desperd√≠cio de tempo e esfor√ßo em treinos ineficazes

---

### 1.3 Solution Overview

**Como o RunEasy Resolve:**

1. **Treinador IA Personalizado:** Cria planos t√©cnicos baseados em 6 par√¢metros individuais (objetivo, n√≠vel, frequ√™ncia, pace atual, prazo, limita√ß√µes)

2. **Feedback P√≥s-Treino Inteligente:** Analisa cada treino comparando planejado vs executado, identificando pontos fortes e √°reas de melhoria com explica√ß√µes t√©cnicas

3. **Adapta√ß√£o Din√¢mica:** IA sugere ajustes no plano a cada 2-4 semanas baseado em performance real e ader√™ncia

4. **Gamifica√ß√£o Motivacional:** Sistema de n√≠veis, pontos e badges (h√≠brido: milestones + progress√£o cont√≠nua) para manter consist√™ncia

5. **Integra√ß√£o Strava:** Aproveita dados de 19M+ brasileiros j√° usando Strava, sem necessidade de tracker pr√≥prio (MVP)

**Diferencial Competitivo:**
- √önico app brasileiro com feedback t√©cnico IA p√≥s-treino
- Pre√ßo 37% menor que Strava Premium (BRL 249,99/ano vs BRL 400+/ano)
- Gamifica√ß√£o desde MVP (vs Strava que n√£o tem coaching)
- Linguagem e cultura local

---

## 2. GOALS & SUCCESS METRICS

### 2.1 Business Goals (Year 1)

**Primary Goal:**  
Atingir 3.200 usu√°rios pagantes com ARR de BRL 1,15M at√© final de 2026.

**Secondary Goals:**
- D30 Retention Rate: >30%
- CAC: <BRL 75
- LTV/CAC: >30:1
- NPS: >60
- App Store Rating: >4.5 stars

---

### 2.2 Product Success Metrics

**North Star Metric:**
- **Ader√™ncia ao Plano:** % de treinos completados conforme planejado pela IA
- **Target MVP:** >60% (beta)
- **Target Year 1:** >70%

**Secondary Metrics:**

1. **Reten√ß√£o (Viabilidade Neg√≥cio):**
   - D1: >40%
   - D7: >30%
   - D30: >30%
   - Month 2: >50%
   - Churn mensal: <10%

2. **Evolu√ß√£o (Efic√°cia IA):**
   - % usu√°rios melhorando pace em 30-60 dias: >50%
   - Melhoria m√©dia de pace: >5% em 8 semanas

3. **Engajamento (Valor Percebido):**
   - % usu√°rios acessando feedback p√≥s-treino: >80%
   - Tempo m√©dio lendo feedback: >60 segundos
   - Feedbacks rated >4 stars: >85%

**Conversion Metrics:**
- Free ‚Üí Trial: >70%
- Trial ‚Üí Paid: >40% (com cart√£o obrigat√≥rio)
- Annual vs Monthly: >50% escolhem anual

---

### 2.3 User Impact Goals

**O que queremos que o usu√°rio sinta:**
- **Dia 1:** "Finalmente tenho um plano feito para mim!"
- **Dia 7:** "A IA realmente entende meu treino e me guia"
- **Dia 30:** "Estou evoluindo de forma mensur√°vel e segura"
- **Dia 90:** "N√£o consigo treinar sem o RunEasy"

**Behavioral Change:**
- De: treinar sem dire√ß√£o, desistir em 2-3 semanas
- Para: treinar consistentemente 3-4x/semana seguindo plano estruturado

---

## 3. TARGET USERS & PERSONAS

### 3.1 Target Market

**TAM (Total Addressable Market):** 7,6M corredores brasileiros 20-35 anos  
**SAM (Serviceable Addressable Market):** 3,2M com disposi√ß√£o a pagar por coaching  
**SOM Year 1 (Serviceable Obtainable Market):** 3.200 usu√°rios pagantes (0,1% SAM)

**Geographic Focus (MVP):**
- S√£o Paulo (Fase 1)
- Rio de Janeiro (Fase 1)
- Expans√£o: BH, Curitiba, POA, Nordeste (Fase 2)

---

### 3.2 Primary Persona: Carlos, 28 anos - Millennial Aspirante

**Demographics:**
- Idade: 25-32 anos
- G√™nero: 65% masculino, 35% feminino
- Renda: BRL 8k-12k/m√™s
- Localiza√ß√£o: Capitais (SP, RJ priorit√°rio)
- Educa√ß√£o: Superior completo
- Profiss√£o: Tech, marketing, finan√ßas, gest√£o

**Psychographics:**
- Corre: 3-4x/semana h√° 6-18 meses
- Objetivo: Completar meia maratona em 4-6 meses
- Motiva√ß√£o: Performance mensur√°vel, dados, conquistas
- Frustra√ß√£o: N√£o sabe se treina certo, planos gen√©ricos n√£o funcionam
- Tech-savvy: Usa Strava religiosamente, Apple Watch/Garmin
- Apps favoritos: Strava, Spotify, Instagram, YouTube

**Pain Points:**
- "N√£o sei se meu pace est√° adequado para meu n√≠vel"
- "Planos da internet s√£o gen√©ricos, n√£o se adaptam a mim"
- "Personal trainer √© muito caro (BRL 10k+/ano)"
- "Quero evoluir mas n√£o sei como periodizar treinos"

**Goals:**
- Sub-2h meia maratona
- Pace <5:30/km consistente
- Treinar sem se machucar
- Medir progresso de forma clara

**Quote:**
> "Eu corro 3x por semana h√° 1 ano, mas sinto que estou s√≥ 'batendo perna'. N√£o sei se estou evoluindo ou s√≥ me cansando."

---

### 3.3 Secondary Persona: J√∫lia, 23 anos - Gen Z Ativa

**Demographics:**
- Idade: 20-25 anos
- G√™nero: 60% feminino, 40% masculino
- Renda: BRL 2k-5k/m√™s (estudante ou in√≠cio carreira)
- Localiza√ß√£o: Capitais, perto de universidades
- Educa√ß√£o: Superior em andamento

**Psychographics:**
- Corre: 2-3x/semana h√° 0-6 meses (iniciante absoluta)
- Objetivo: Criar h√°bito, perder peso, ganhar condicionamento
- Motiva√ß√£o: Est√©tica, redes sociais, gamifica√ß√£o, comunidade
- Frustra√ß√£o: Acha corrida "chata", falta consist√™ncia
- Hyper-conectada: TikTok 3h/dia, Instagram 2h/dia
- Apps favoritos: TikTok, Instagram, BeReal, Spotify

**Pain Points:**
- "Corrida √© muito chata, preciso de algo que me motive"
- "N√£o sei por onde come√ßar"
- "Desisto depois de 2 semanas"
- "Quero resultados vis√≠veis r√°pido"

**Goals:**
- Correr 5K sem parar
- Fazer parte de comunidade fitness
- Compartilhar progresso no Instagram
- Conquistar badges e achievements

**Quote:**
> "Eu tentei correr v√°rias vezes mas sempre desisto. Preciso de algo que transforme isso em um jogo."

---

### 3.4 Tertiary Persona: Rafael, 32 anos - Corredor Intermedi√°rio

**Demographics:**
- Idade: 30-35 anos
- G√™nero: 70% masculino, 30% feminino
- Renda: BRL 12k-18k/m√™s
- Profiss√£o: Gerente, diretor, empreendedor

**Psychographics:**
- Corre: 4-5x/semana h√° 2-5 anos
- Objetivo: Quebrar plat√¥, preparar primeira maratona
- Motiva√ß√£o: Performance, dados avan√ßados, preven√ß√£o les√µes
- J√° completou: 5+ meias maratonas
- Dispositivos: Garmin Forerunner, Strava Premium

**Pain Points:**
- "Estou estagnado no mesmo pace h√° 6 meses"
- "N√£o sei como treinar para maratona sem me machucar"
- "Preciso de an√°lise t√©cnica profunda"

**Goals:**
- Sub-4h maratona
- Treinar com periodiza√ß√£o cient√≠fica
- Detectar sinais de overtraining antes de virar les√£o

---

## 4. MVP SCOPE & FEATURES

### 4.1 In Scope (MVP - Must Have)

**Core Features (Fase 1 - 16 semanas):**

1. **Autentica√ß√£o e Onboarding**
   - OAuth Strava (obrigat√≥rio)
   - Question√°rio 6 perguntas (objetivo, n√≠vel, frequ√™ncia, les√µes, pace 5K, prazo)
   - Valida√ß√£o inteligente de inconsist√™ncias

2. **Treinador IA - Cria√ß√£o de Plano**
   - Plano personalizado 8-16 semanas
   - Detalhamento treino a treino (pace por segmento, objetivo, dicas t√©cnicas)
   - Aloca√ß√£o em dias preferidos pelo usu√°rio
   - Tipos de treino: rodagem leve, long run, intervalados, recovery

3. **Calend√°rio Visual**
   - Visualiza√ß√£o mensal/semanal
   - Treinos marcados por tipo (cores/√≠cones)
   - Tap para ver detalhes do treino
   - Status: pendente, completado, pulado

4. **Integra√ß√£o Strava (Webhooks)**
   - Sincroniza√ß√£o autom√°tica p√≥s-treino
   - Extra√ß√£o de dados: dist√¢ncia, pace, moving time, elevation, splits/km
   - Linking autom√°tico treino planejado ‚Üî atividade Strava

5. **Feedback P√≥s-Treino IA (5 Se√ß√µes)**
   - Hero Message (tom emocional adaptativo)
   - M√©tricas Detalhadas (tabela comparativa planejado vs executado)
   - Pontos Fortes (lista com √≠cones)
   - O Que Melhorar + Explica√ß√£o t√©cnica
   - Impacto na Progress√£o

6. **Adapta√ß√£o Din√¢mica (Intermedi√°ria)**
   - Sugest√£o de ajuste a cada 2-4 semanas
   - Baseado em: ader√™ncia, performance, sinais de fadiga
   - Usu√°rio aprova/rejeita ajuste
   - Se treino pulado: IA pergunta motivo (injury, busy, fadiga) e ajusta

7. **Sistema de Gamifica√ß√£o**
   - C√°lculo de N√≠vel do Corredor (m√©trica composta: performance + consist√™ncia + ader√™ncia)
   - Sistema de Pontos (50 pts/treino, +25 bonus se conforme planejado)
   - 10 Badges MVP (h√≠brido: milestones √∫nicos + performance com n√≠veis I/II/III)
   - Badges locked vis√≠veis com crit√©rio transparente
   - Notifica√ß√£o contextual (badge aparece no final do feedback)

8. **Home Screen**
   - Header: Nome + N√≠vel atual (badge visual + progress bar)
   - Card: Pr√≥ximo treino agendado
   - Card: √öltima atividade + link para feedback
   - Card: Streak atual (dias consecutivos)
   - Pull-to-refresh

9. **Perfil e Settings**
   - Visualiza√ß√£o de badges (earned + locked)
   - Total de pontos acumulados
   - Hist√≥rico de treinos e feedbacks
   - Settings: notifica√ß√µes, unidade medida, desconectar Strava, exportar dados, deletar conta

10. **Monetiza√ß√£o**
    - Paywall ap√≥s onboarding (tela overview do plano)
    - Trial 14 dias com cart√£o obrigat√≥rio
    - Desconto early-adopter 40% OFF anual (Day 7)
    - Modal retention ao cancelar

---

### 4.2 Out of Scope (Fase 2 - P√≥s-MVP)

**N√£o inclu√≠do no MVP:**

1. **An√°lise de Movimentos (V√≠deo)**
   - Upload de v√≠deo para an√°lise biomec√¢nica
   - GCP Vertex AI para pose estimation
   - Feedback de postura e preven√ß√£o de les√µes

2. **Rede Social Interna**
   - Perfis de usu√°rios
   - Seguir outros corredores
   - Feed de atividades
   - Coment√°rios e kudos

3. **Matching de Eventos**
   - Recomenda√ß√£o inteligente de corridas/provas
   - Integra√ß√£o com Ticket Sports ou similares
   - Filtro por n√≠vel, dist√¢ncia, localiza√ß√£o

4. **Tracking GPS Nativo**
   - Rastreamento pr√≥prio sem depender do Strava
   - Desenvolvimento de m√≥dulo GPS

5. **Grupos e Clubes**
   - Descoberta de grupos de corrida
   - Chat entre membros
   - Desafios de grupo

6. **Planos de Treino Avan√ßados**
   - Ultramaratonas (>42km)
   - Trail running espec√≠fico
   - Multi-sport (triathlon)

---

## 5. FUNCTIONAL REQUIREMENTS

### 5.1 FR-001: Autentica√ß√£o e Autoriza√ß√£o

**Descri√ß√£o:** Sistema de autentica√ß√£o via Strava OAuth 2.0

**Requirements:**
- FR-001.1: App deve oferecer √∫nica op√ß√£o de login: "Conectar com Strava"
- FR-001.2: OAuth flow deve redirecionar para Strava, solicitar permiss√µes (read activities, write activities)
- FR-001.3: Ap√≥s autoriza√ß√£o, app deve receber tokens (access + refresh) e salvar encrypted no backend
- FR-001.4: Tokens devem ser refreshed automaticamente quando expirarem (validade: 6h)
- FR-001.5: Se usu√°rio revogar acesso no Strava, app deve detectar e solicitar re-autentica√ß√£o
- FR-001.6: Backend deve criar registro de usu√°rio em Supabase Auth sincronizado com Strava athlete_id

**Acceptance Criteria:**
- Usu√°rio consegue autenticar em <15 segundos
- Tokens armazenados com criptografia AES-256
- Auto-refresh funciona sem interven√ß√£o do usu√°rio
- Erro de autoriza√ß√£o exibe mensagem clara

---

### 5.2 FR-002: Onboarding e Question√°rio Inicial

**Descri√ß√£o:** Coleta de informa√ß√µes para cria√ß√£o do plano personalizado

**Requirements:**
- FR-002.1: Exibir 6 perguntas sequenciais (1 por tela ou multi-step form):
  1. Qual seu objetivo? [5K, 10K, Meia, Maratona, Fitness Geral]
  2. Qual seu n√≠vel atual? [Iniciante 0-6m, Intermedi√°rio 6-24m, Avan√ßado 2+anos]
  3. Quantos dias/semana pode treinar? [2, 3, 4, 5, 6, 7]
  4. Tem les√£o ou limita√ß√£o? [Sim/N√£o + campo texto opcional]
  5. Pace atual aproximado 5K? [Input num√©rico min/km ou "N√£o sei"]
  6. Quando quer atingir objetivo? [4sem, 8sem, 12sem, 16+sem]

- FR-002.2: Valida√ß√£o inteligente de inconsist√™ncias:
  - Se n√≠vel "Iniciante" mas pace <5:00/km ‚Üí IA questiona: "Seu pace sugere n√≠vel intermedi√°rio. Confirma iniciante?"
  - Usu√°rio pode confirmar ou corrigir

- FR-002.3: Progress indicator visual (1/6, 2/6...)
- FR-002.4: Bot√£o "Voltar" para corrigir respostas anteriores
- FR-002.5: Valida√ß√£o de campos obrigat√≥rios antes de avan√ßar
- FR-002.6: Salvar respostas no backend (user_onboarding table)

**Acceptance Criteria:**
- Completar onboarding em <90 segundos
- Valida√ß√£o detecta >80% das inconsist√™ncias √≥bvias
- Zero crashes durante question√°rio
- Dados salvos corretamente no DB

---

### 5.3 FR-003: Cria√ß√£o de Plano de Treino (IA)

**Descri√ß√£o:** IA gera plano personalizado baseado nas respostas do onboarding

**Requirements:**
- FR-003.1: Ap√≥s question√°rio, exibir loading screen "IA criando seu plano..." (10-15s)
- FR-003.2: Backend chama Anthropic Claude API (Sonnet 4.5) com prompt estruturado:
  - System prompt: defini√ß√£o do treinador especialista
  - User input: respostas do question√°rio + contexto
  - Output esperado: JSON estruturado com plano 8-16 semanas

- FR-003.3: Plano deve conter:
  - Dura√ß√£o total (semanas)
  - Frequ√™ncia (treinos/semana)
  - Por semana: progress√£o (ex: "Semana 1-4: Base aer√≥bica")
  - Por treino:
    - Data sugerida (baseado em dias preferidos)
    - Tipo (rodagem leve, long run, intervalado, recovery)
    - Dist√¢ncia total
    - Instru√ß√µes detalhadas por segmento:
      - Aquecimento: Xkm @ pace Y-Z/km
      - Ritmo principal: Xkm @ pace Y-Z/km
      - Desaquecimento: Xkm @ pace Y+/km
    - Objetivo do treino (ex: "Desenvolver base aer√≥bica Zona 2")
    - Dicas t√©cnicas (ex: "Mantenha cad√™ncia 170-180")

- FR-003.4: Parse resposta IA e salvar estruturado no DB:
  - training_plans table (plano geral)
  - workouts table (cada treino individual)

- FR-003.5: Se IA falhar (timeout, erro), retry at√© 3x com exponential backoff
- FR-003.6: Se falhar definitivamente, exibir erro amig√°vel + op√ß√£o "Tentar novamente"

**Acceptance Criteria:**
- Plano gerado em <20 segundos (p95)
- Plano cont√©m m√≠nimo 8 treinos (2x/semana √ó 4 semanas)
- Instru√ß√µes de pace s√£o tecnicamente corretas (baseadas no pace informado)
- 100% dos planos t√™m estrutura JSON v√°lida
- Taxa de sucesso IA >98%

---

### 5.4 FR-004: Paywall e Monetiza√ß√£o

**Descri√ß√£o:** Controle de acesso ao plano atrav√©s de paywall com trial obrigat√≥rio

**Requirements:**
- FR-004.1: Ap√≥s cria√ß√£o do plano, exibir tela "Overview Resumida":
  - Card visual: Objetivo (ex: "Meia maratona em 12 semanas")
  - Preview primeiro treino (tipo + dist√¢ncia)
  - Badge inicial: "üéÅ Primeiro Passo"
  - Plano completo (calend√°rio) aparece emba√ßado/bloqueado

- FR-004.2: √önico CTA ativo: "Desbloquear Meu Plano de Treino"
- FR-004.3: Tap CTA ‚Üí Tela de assinatura com 2 op√ß√µes:
  - Mensal: BRL 29,99/m√™s
  - Anual: BRL 249,99/ano (economia de 30%)

- FR-004.4: Trial obrigat√≥rio: "Experimente 14 dias GR√ÅTIS"
  - **OBRIGAT√ìRIO:** Solicitar dados de cart√£o de cr√©dito
  - Validar cart√£o (sem cobran√ßa imediata)
  - Cobran√ßa autom√°tica no Day 15 se n√£o cancelar

- FR-004.5: Desconto Early-Adopter (primeiros 500 usu√°rios):
  - No Day 7 do trial, enviar push notification + email:
    - "üéâ Voc√™ se destacou! Por ser um dos primeiros, ganhe 40% OFF vital√≠cio no plano anual"
    - BRL 249,99 ‚Üí BRL 149,99/ano
  - Oferta expira em 48h

- FR-004.6: Ap√≥s confirma√ß√£o pagamento/trial:
  - Desbloquear calend√°rio completo
  - Redirecionar para Home/Calend√°rio

- FR-004.7: Durante trial, usu√°rio tem acesso completo a todas as features premium

**Acceptance Criteria:**
- Paywall aparece 100% das vezes ap√≥s onboarding
- Convers√£o Free ‚Üí Trial >70%
- Integra√ß√£o com Stripe funcional (pagamentos processados)
- Desconto Day 7 enviado automaticamente
- Trial expira corretamente no Day 14 + cobran√ßa autom√°tica Day 15

---

### 5.5 FR-005: Calend√°rio Visual de Treinos

**Descri√ß√£o:** Interface principal para visualiza√ß√£o e acesso aos treinos planejados

**Requirements:**
- FR-005.1: Visualiza√ß√£o padr√£o: mensal (m√™s atual)
- FR-005.2: Toggle: alternar entre visualiza√ß√£o mensal/semanal
- FR-005.3: Treinos marcados no calend√°rio:
  - Cores por tipo: azul (rodagem leve), verde (long run), laranja (intervalado), cinza (recovery)
  - √çcone: üèÉ (corrida), üí™ (tiro), üîã (recovery)
  - Dist√¢ncia exibida (ex: "5km")

- FR-005.4: Status visual:
  - Pendente: cor normal
  - Completado: check verde ‚úÖ
  - Pulado: X vermelho ‚ùå

- FR-005.5: Tap em treino ‚Üí Modal com detalhes:
  - T√≠tulo: "Rodagem Leve - 5km"
  - Instru√ß√µes completas (aquecimento, ritmo, desaquecimento)
  - Objetivo do treino
  - Dicas t√©cnicas
  - Bot√£o prim√°rio: "Iniciar no Strava"
  - Bot√£o secund√°rio: "Marcar como Pulado"

- FR-005.6: Navega√ß√£o: swipe left/right para mudar m√™s
- FR-005.7: Indicador visual: dia atual destacado
- FR-005.8: Loading skeleton enquanto carrega treinos do backend

**Acceptance Criteria:**
- Calend√°rio carrega em <2 segundos
- Treinos exibidos corretamente com cores e √≠cones
- Tap funciona em 100% dos treinos
- Transi√ß√£o entre meses smooth (60fps)

---

### 5.6 FR-006: Integra√ß√£o Strava (Webhooks)

**Descri√ß√£o:** Sincroniza√ß√£o autom√°tica de atividades do Strava para an√°lise IA

**Requirements:**
- FR-006.1: Backend deve se inscrever no Strava Webhook (subscription verification)
- FR-006.2: Endpoint webhook deve aceitar eventos do tipo:
  - "create" (nova atividade)
  - "update" (atividade modificada)
  - "delete" (atividade deletada)

- FR-006.3: Ao receber evento "create":
  - Enfileirar job ass√≠ncrono (BullMQ ou similar)
  - Job faz GET request para Strava API: `/activities/{id}`
  - Extrair dados obrigat√≥rios (Grupos A+B+D):
    - Grupo A: distance, moving_time, elapsed_time, average_speed, max_speed, start_date
    - Grupo B: total_elevation_gain, average_temp (se dispon√≠vel)
    - Grupo D: splits_metric (splits por km), start_latlng, map.polyline

- FR-006.4: Salvar atividade em strava_activities table
- FR-006.5: Tentar fazer linking autom√°tico com workout planejado:
  - Buscar workout com data = start_date ¬± 24h
  - Se encontrar, vincular (workout.strava_activity_id = activity.id)
  - Se n√£o encontrar, marcar como "unplanned run"

- FR-006.6: Ap√≥s salvar atividade, disparar job de gera√ß√£o de feedback IA (FR-007)
- FR-006.7: Rate limiting: respeitar limites Strava (200 req/15min, 2000 req/dia)
- FR-006.8: Retry logic: se falhar, retry at√© 3x com backoff exponencial

**Acceptance Criteria:**
- Webhook subscrito com sucesso (challenge respondido)
- 100% das atividades "create" s√£o capturadas
- Dados extra√≠dos corretamente (validar splits, elevation)
- Linking autom√°tico funciona em >80% dos casos
- Lat√™ncia webhook ‚Üí dados salvos: <30 segundos (p95)

---

### 5.7 FR-007: Feedback P√≥s-Treino (IA - 5 Se√ß√µes)

**Descri√ß√£o:** An√°lise inteligente do treino comparando planejado vs executado

**Requirements:**
- FR-007.1: Trigger: ap√≥s atividade Strava ser salva (FR-006)
- FR-007.2: Backend chama Claude API com prompt estruturado:
  - Input:
    - Workout planejado (instru√ß√µes, pace target, dist√¢ncia)
    - Strava activity (dados reais: distance, pace, splits, elevation)
    - Hist√≥rico √∫ltimas 4 semanas (contexto)
  - Output esperado: JSON estruturado com 5 se√ß√µes

- FR-007.3: Estrutura do feedback (5 se√ß√µes):

**Se√ß√£o 1: Hero Message**
- Tom emocional adaptativo baseado em desempenho:
  - Excepcional (>95% ader√™ncia): "Excepcional! Voc√™ superou as expectativas üöÄ"
  - Bom (80-95%): "√ìtimo trabalho! Treino completado com sucesso üí™"
  - Satisfat√≥rio (60-80%): "Bom esfor√ßo! Continue progredindo üëè"
  - Incompleto (<60%): "O importante √© ter sa√≠do de casa. Vamos analisar o que aconteceu."

**Se√ß√£o 2: M√©tricas Detalhadas (Tabela Comparativa)**
| M√©trica | Planejado | Executado | Diferen√ßa | Status |
|---------|-----------|-----------|-----------|--------|
| Dist√¢ncia | 10.0km | 10.2km | +2% | ‚úÖ |
| Pace m√©dio | 5:37/km | 5:28/km | -3% | ‚ö†Ô∏è |
| Elevation | 50m | 65m | +30% | ‚ÑπÔ∏è |
| Moving time | 56min | 55min | -2% | ‚úÖ |

**Se√ß√£o 3: Pontos Fortes (Lista)**
- ‚úÖ Consist√™ncia de pace (varia√ß√£o <5% entre splits)
- ‚úÖ Disciplina na dist√¢ncia total (+2% dentro da margem)
- ‚úÖ Resili√™ncia (elevation 30% maior que esperado)

**Se√ß√£o 4: O Que Melhorar + Explica√ß√£o T√©cnica**
- ‚ö†Ô∏è Pace m√©dio 3% mais r√°pido que planejado
  - **Explica√ß√£o:** "Para treino de base aer√≥bica (Zona 2), √© importante manter ritmo conservador. Pace muito r√°pido prejudica adapta√ß√£o aer√≥bica e aumenta risco de fadiga acumulada."
  - **Sugest√£o:** "No pr√≥ximo treino longo, use monitor de frequ√™ncia card√≠aca para garantir Zona 2 (140-150 bpm para seu perfil)."

**Se√ß√£o 5: Impacto na Progress√£o**
- "Com base neste treino e nos √∫ltimos 7 dias, voc√™ est√° 8% acima do volume planejado. Continuando assim, vou sugerir um ajuste no plano em 2 semanas para otimizar recupera√ß√£o."

- FR-007.4: Se treino N√ÉO completado (<50% dist√¢ncia), tom muda para questionador:
  - Hero Message: "Voc√™ parou em 5km. O que aconteceu?"
  - Bot√µes: [Cansa√ßo | Dor | Falta de tempo | Outro]
  - Baseado na resposta, IA ajusta pr√≥ximo treino (FR-008)

- FR-007.5: Salvar feedback em ai_feedbacks table
- FR-007.6: Enviar push notification: "üéâ Sua an√°lise est√° pronta!"
- FR-007.7: Se usu√°rio conquistou badge durante treino, adicionar se√ß√£o "Conquistas Desbloqueadas" no final

**Fallback sem Heart Rate:**
- Se activity n√£o tem average_heart_rate, adicionar nota ao final:
  - "üí° Dica: Use monitor card√≠aco para an√°lises mais precisas de zonas de treinamento."

**Acceptance Criteria:**
- Feedback gerado em <30 segundos ap√≥s atividade salva
- 100% dos feedbacks t√™m 5 se√ß√µes completas
- Tom emocional correto baseado em ader√™ncia
- Explica√ß√µes t√©cnicas s√£o precisas e did√°ticas
- Taxa de satisfa√ß√£o feedback (rating 4-5 stars) >85%

---

### 5.8 FR-008: Adapta√ß√£o Din√¢mica do Plano (Intermedi√°ria)

**Descri√ß√£o:** IA sugere ajustes no plano a cada 2-4 semanas baseado em performance

**Requirements:**
- FR-008.1: Trigger: cron job semanal (domingo, 20h)
- FR-008.2: Para cada usu√°rio ativo, verificar:
  - Tempo desde cria√ß√£o do plano: >2 semanas?
  - √öltima sugest√£o de ajuste: >2 semanas atr√°s?

- FR-008.3: Se eleg√≠vel, IA analisa:
  - % ader√™ncia ao plano (√∫ltimas 2-4 semanas)
  - Tend√™ncia de pace (melhorando, est√°vel, piorando)
  - Volume acumulado vs planejado
  - Sinais de fadiga (pace caindo, treinos pulados por "cansa√ßo")

- FR-008.4: IA gera sugest√£o de ajuste (JSON):
  - Tipo: "increase_volume" | "decrease_intensity" | "add_recovery" | "stay_course"
  - Justificativa: texto explicativo
  - Mudan√ßas espec√≠ficas: quais treinos ajustar e como

- FR-008.5: Enviar push notification + email:
  - "üìä An√°lise de Progresso: Baseado no seu desempenho das √∫ltimas 3 semanas, sugiro aumentar volume em 10%. Ver detalhes?"

- FR-008.6: Tela de Sugest√£o de Ajuste:
  - Resumo da an√°lise
  - Compara√ß√£o: plano atual vs plano ajustado
  - Bot√µes: [Aceitar Ajuste] [Manter Plano Atual]

- FR-008.7: Se aceitar:
  - Atualizar training_plan e workouts tables
  - Gerar novo calend√°rio
  - Notificar sucesso: "Plano atualizado! Veja suas pr√≥ximas semanas."

- FR-008.8: Se rejeitar:
  - Salvar decis√£o (n√£o sugerir mesmo ajuste novamente)
  - Registrar motivo (opcional): "Por que rejeitou?"

**Treino Pulado - Ajuste Imediato:**
- FR-008.9: Se usu√°rio marca treino como "Pulado":
  - Exibir question√°rio: "O que aconteceu?" [Cansa√ßo | Dor | Falta de tempo | Outro]
  - Baseado na resposta:
    - **Dor:** IA sugere: "Vou adicionar 1 dia de descanso extra e reduzir intensidade 20%"
    - **Cansa√ßo:** "Vou trocar pr√≥ximo treino intenso por recupera√ß√£o ativa"
    - **Falta de tempo:** "Vou reorganizar treinos desta semana. Prefere qual dia?"
  - Usu√°rio aprova ‚Üí workouts reorganizados automaticamente

**Acceptance Criteria:**
- Sugest√£o enviada para 100% dos usu√°rios eleg√≠veis
- An√°lise IA tecnicamente correta
- Taxa de aceita√ß√£o >60%
- Ajuste imediato funciona em <5 segundos

---

### 5.9 FR-009: Sistema de Gamifica√ß√£o (COMPLETO NO DOCUMENTO ANTERIOR)

### 5.10 FR-010: Home Screen (COMPLETO NO DOCUMENTO ANTERIOR)

---

## 6-12: SE√á√ïES RESTANTES (COMPLETAS NO DOCUMENTO ANTERIOR)

---

**FIM DO PRD - DOCUMENTO 100% COMPLETO**

---

**Documento preparado por:** NEO - Agente Especialista em Projetos  
**Status:** FINALIZADO E APROVADO